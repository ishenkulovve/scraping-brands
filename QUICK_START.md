# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## ‚úÖ –ß—Ç–æ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ

- ‚úÖ Node.js –ø—Ä–æ–µ–∫—Ç —Å TypeScript
- ‚úÖ Prisma ORM —Å SQLite –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–æ–¥–µ–ª—å `CatalogLink` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –∫–∞—Ç–∞–ª–æ–≥–∏
- ‚úÖ –ö–ª–∞—Å—Å `CatalogScraper` –¥–ª—è —Å–∫—Ä–∞–ø–ø–∏–Ω–≥–∞
- ‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç (–≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã)

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
scrapper-back/
‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma          # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ migrations/            # –ú–∏–≥—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ dev.db                 # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prisma.ts          # Prisma Client
‚îÇ   ‚îú‚îÄ‚îÄ scrapers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ catalogScraper.ts  # –ö–ª–∞—Å—Å –¥–ª—è —Å–∫—Ä–∞–ø–ø–∏–Ω–≥–∞ –∫–∞—Ç–∞–ª–æ–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ examples/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ example-usage.ts   # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ index.ts               # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª
‚îÇ   ‚îî‚îÄ‚îÄ test-scraper.ts        # –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ tsconfig.json
‚îî‚îÄ‚îÄ README.md
```

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–¥ —Å–≤–æ–π —Å–∞–π—Ç

–û—Ç–∫—Ä–æ–π—Ç–µ `src/scrapers/catalogScraper.ts` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –º–µ—Ç–æ–¥ `extractCatalogLinks()`:

```typescript
private extractCatalogLinks(html: string): string[] {
  const $ = cheerio.load(html);
  const links: string[] = [];

  // –ò–ó–ú–ï–ù–ò–¢–ï –≠–¢–û–¢ –°–ï–õ–ï–ö–¢–û–† –ø–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞!
  $('a.your-catalog-class').each((_, element) => {
    const href = $(element).attr('href');
    if (href) {
      const absoluteUrl = href.startsWith('http') 
        ? href 
        : new URL(href, this.baseUrl).toString();
      links.push(absoluteUrl);
    }
  });

  return [...new Set(links)];
}
```

### 2. –£–∫–∞–∂–∏—Ç–µ URL —Å–∞–π—Ç–∞

–û—Ç–∫—Ä–æ–π—Ç–µ `src/index.ts` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ:

```typescript
const TARGET_WEBSITE = 'https://example.com'; // –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à —Å–∞–π—Ç
```

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∞–ø–ø–µ—Ä

```bash
npm run scrape
```

## üìä –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∞–ø–ø–µ—Ä
npm run scrape

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã
npx tsx src/test-scraper.ts

# –û—Ç–∫—Ä—ã—Ç—å Prisma Studio (GUI –¥–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö)
npm run prisma:studio

# –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Prisma Client
npm run prisma:generate

# –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å TypeScript
npm run build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥
npm start

# –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å watch mode
npm run dev
```

## üîç –ö–∞–∫ –Ω–∞–π—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã

### –°–ø–æ—Å–æ–± 1: –ò–Ω—Å–ø–µ–∫—Ç–æ—Ä –±—Ä–∞—É–∑–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç –≤ Chrome/Firefox
2. –ù–∞–∂–º–∏—Ç–µ F12 (–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä)
3. –ù–∞–∂–º–∏—Ç–µ Ctrl+Shift+C (Select element)
4. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ —Å—Å—ã–ª–∫—É –∫–∞—Ç–∞–ª–æ–≥–∞
5. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
   ```html
   <a class="catalog-link" href="/catalog/electronics">
   ```
6. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–ª–∞—Å—Å –∏–ª–∏ –∞—Ç—Ä–∏–±—É—Ç –≤ —Å–µ–ª–µ–∫—Ç–æ—Ä–µ: `$('a.catalog-link')`

### –°–ø–æ—Å–æ–± 2: –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç
2. –ù–∞–∂–º–∏—Ç–µ F12, –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Console
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ jQuery —Å–µ–ª–µ–∫—Ç–æ—Ä—ã:
   ```javascript
   // –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
   document.querySelectorAll('a.catalog-link')
   document.querySelectorAll('a[href*="/catalog/"]')
   document.querySelectorAll('.menu a')
   ```
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ—Ç —Å–µ–ª–µ–∫—Ç–æ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç –Ω—É–∂–Ω—ã–µ —Å—Å—ã–ª–∫–∏

## üí° –ü—Ä–∏–º–µ—Ä—ã —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤

```typescript
// –ü–æ –∫–ª–∞—Å—Å—É
$('a.catalog-link')

// –ü–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∫–ª–∞—Å—Å–∞–º
$('a.nav-link.catalog')

// –ü–æ –∞—Ç—Ä–∏–±—É—Ç—É href
$('a[href*="/catalog/"]')
$('a[href^="/category/"]')

// –ü–æ —Ä–æ–¥–∏—Ç–µ–ª—é
$('.menu a')
$('#navigation a')

// –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π
$('.sidebar a[href*="/catalog/"]')

// –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä
$('a.catalog-link, a.category-link, a[href*="/products/"]')
```

## üìä –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

### –ß–µ—Ä–µ–∑ –∫–æ–¥ (–ø—Ä–∏–º–µ—Ä—ã –≤ `src/examples/example-usage.ts`)

```typescript
import prisma from './lib/prisma';

// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∫–∞—Ç–∞–ª–æ–≥–∏
const all = await prisma.catalogLink.findMany();

// –ü–æ–ª—É—á–∏—Ç—å –Ω–µ—Å–æ–±—Ä–∞–Ω–Ω—ã–µ
const pending = await prisma.catalogLink.findMany({
  where: { scrapped: false }
});

// –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
await prisma.catalogLink.update({
  where: { id: 'some-id' },
  data: { scrapped: true }
});

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
const count = await prisma.catalogLink.count();
```

### –ß–µ—Ä–µ–∑ Prisma Studio (GUI)

```bash
npm run prisma:studio
```

–û—Ç–∫—Ä–æ–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–ì–û–¢–û–í–û**: –°–æ–∑–¥–∞–Ω–∞ –º–æ–¥–µ–ª—å –¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –∫–∞—Ç–∞–ª–æ–≥–∏
2. ‚è≥ **TODO**: –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `ProductLink` –¥–ª—è —Å—Å—ã–ª–æ–∫ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã
3. ‚è≥ **TODO**: –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `Product` –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö
4. ‚è≥ **TODO**: –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∞–ø–ø–µ—Ä –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤
5. ‚è≥ **TODO**: –î–æ–±–∞–≤–∏—Ç—å API endpoints

## ‚ùì –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –û—à–∏–±–∫–∞: Cannot find module '@prisma/client'

–†–µ—à–µ–Ω–∏–µ:
```bash
npx prisma generate
```

### –û—à–∏–±–∫–∞: SQLite database locked

–†–µ—à–µ–Ω–∏–µ: –ó–∞–∫—Ä–æ–π—Ç–µ Prisma Studio –∏ –¥—Ä—É–≥–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ë–î

### –°–µ–ª–µ–∫—Ç–æ—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç —Å—Å—ã–ª–∫–∏

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–∞–π—Ç –Ω–µ —Ç—Ä–µ–±—É–µ—Ç JavaScript (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Puppeteer –≤–º–µ—Å—Ç–æ Cheerio)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–ª–µ–∫—Ç–æ—Ä –≤ –±—Ä–∞—É–∑–µ—Ä–µ
3. –î–æ–±–∞–≤—å—Ç–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ HTML –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```typescript
console.log(html); // –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π HTML
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ —ç—Ç–∏–∫–∞

- ‚úÖ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `robots.txt` —Å–∞–π—Ç–∞
- ‚úÖ –î–æ–±–∞–≤—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏
- ‚úÖ –£–∫–∞–∂–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π User-Agent
- ‚úÖ –ù–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞–π—Ç–µ —Å–µ—Ä–≤–µ—Ä —Å–∞–π—Ç–∞
- ‚úÖ –°–æ–±–ª—é–¥–∞–π—Ç–µ Terms of Service

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç: `npx tsx src/test-scraper.ts`
3. –û—Ç–∫—Ä–æ–π—Ç–µ Prisma Studio –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ë–î: `npm run prisma:studio`

